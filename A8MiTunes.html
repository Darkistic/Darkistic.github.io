<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>A8MiTunes</title>

		<script src="music.js"></script>
		<script>

			function clearSearch() {
				if (this.value=='search...') {
					document.getElementById('search').value='';
				}
			}

			function showMedia() {

				var t = document.miTunes.trackSelect.selectedIndex;
				var a = document.miTunes.albumSelect.selectedIndex;
				var m = albums[a].tracks[t].mp3;

				var art =
					'<img src="artwork/'
					+albums[a].artwork
					+'.jpg" class="art">'

				var song =
					'<audio controls id="player" style="width:100%"><source src="audio/'
					+albums[a].artist
					+'/'
					+albums[a].title
					+'/'
					+m
					+'" type="audio/mpeg">'
					+'<source src="audio/'
					+albums[a].artist
					+'/'
					+albums[a].title
					+'/'
					+m.substring(0, m.length-4)
					+'.wav" type="audio/wav">'
					+'Your browser does not support the audio element.</audio>'

				var lyric =
					'<textarea id="lyrics" rows="8" class="lyrics" readonly>'
					+albums[a].tracks[t].lyrics
					+'</textarea>'

				document.getElementById("art").innerHTML = art;
				document.getElementById("player").innerHTML = song;
				document.getElementById("lyrics").innerHTML = lyric;
			}

			function showTracks() {

				var album = document.miTunes.albumSelect.selectedIndex;
				var albumLength = albums[album].tracks.length;
				var html = '<select size="16" name="trackSelect" onchange="showMedia()" style="font-size:24px; width:100%; height:auto;">'

					for (i=0; i<albumLength; i++) {

					html +=
						'<option value="track'
						+(i+1)
						+'">'
						+albums[album].tracks[i].title
						+'</option>'
					}

				html += '</select>';
				document.getElementById('tracks').innerHTML = html;
			}

			function initAlbums() {

				var html = '<select size="16" name="albumSelect" onchange="showTracks()" style="font-size:24px; width:100%; height:auto;">'

				for (i=0; i<albums.length; i++) {

					html +=
						'<option id="album'
						+(i+1)
						+'">'
						+albums[i].title
						+'</option>'
				}

				html += '</select>';
				document.getElementById('albums').innerHTML = html;
			}

			function initKeyboard() {

				var keys = [
					['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
					['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
					['Z', 'X', 'C', 'V', 'B', 'N', 'M']
				]

				for (i=0; i<keys.length; i++) {

					var row = '';
					row +='<td colspan="3"><table class="keyboard"><tr><td>';

					for (j=0; j<keys[i].length; j++) {

						row +=
							'<input type="button" value="'
							+keys[i][j]
							+'" class="button" />'
					}

					row += '</td></tr></table></td>';
					document.getElementById("row"+(i+1)).innerHTML = row;
				}
			}

		</script>

		<style>

			.miTunes {
				max-width: 920px;
				min-width: 725px;
				border: 4px groove black;
				background-color: #77DDDD;
				width: 100%;
			}
			.top {
				vertical-align: top;
				padding-bottom: 4px;
				width: 28%;
			}
			.art {
				display: block;
				margin: auto;
				width: 100%;
			}
			.lyrics {
				min-height: 100px;
				max-height: 138px;
				resize: vertical;
				width: 97.5%;
			}
			.keyboard {
				text-align: center;
				width: 100%;
			}
			.button {
				text-align: center;
				font-size: 40px;
				width: 70px;
			}

		</style>
	</head>

	<body>
		<h1 style="margin:10px; width:200px;">MiTunes</h1>
		<p style="position:absolute; left:170px; top:8px; min-width:229px;">Louis Meredith - cvljm2 - B623038</p>
		<div>
			<form name="miTunes">
				<table class="miTunes">
					<tr>
						<td id="albums" class="top"><select size="16" style="font-size:24px; width:100%;"><option></option></select></td>
						<td id="tracks" class="top"><select size="16" style="font-size:24px; width:100%;"><option></option></select></td>
						<td class="top">
							<span id="art"></span>
							<span id="player"></span>
							<span id="lyrics"></span>
						</td>
					</tr>
					<tr><td colspan="3" style="padding:4px;">
						<!--should I use focusin?-->
						<input type="text" id="search" value="search..." onfocusin="if (this.value=='search...') {this.value=''};" onfocusout="if (this.value=='') {this.value='search...'};" style="font-size:40px; width:88%;" />
						<input type="button" value="<--" class="button" />
					</td></tr>
					<!--could do a loop for each row-->
					<tr id="row1"><td colspan="3"></td></tr>
					<tr id="row2"><td colspan="3"></td></tr>
					<tr id="row3"><td colspan="3"></td></tr>
				</table>
			</form>
		</div>
		<script>initAlbums(); initKeyboard();</script>
	</body>
</html>
